(function(t){function e(e){for(var n,r,o=e[0],i=e[1],c=e[2],p=0,d=[];p<o.length;p++)r=o[p],l[r]&&d.push(l[r][0]),l[r]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var i=a[o];0!==l[i]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},l={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=i;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"21d8":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),l=a("bb71");a("da64");n["a"].use(l["a"],{iconfont:"md"});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-toolbar",[a("v-toolbar-title",{staticClass:"headline"},[t._v("\n            UTokyo Digital Archives Project Pro\n        ")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{flat:""}},[a("a",{attrs:{href:"https://github.com/nakamura196/portal_pro"}},[a("i",{staticClass:"material-icons"},[t._v("home")])])])],1)],1),a("v-content",[a("router-view")],1),a("v-footer",{attrs:{dark:"",height:"auto"}},[a("v-card",{staticClass:"flex",attrs:{flat:"",tile:""}},[a("v-card-actions",{staticClass:"grey darken-3 justify-center my-5 text-xs-center"},[t._v("\n                東京大学学術資産等アーカイブズ委員会事務局"),a("br"),t._v(" （東京大学附属図書館総務課／学術資産アーカイブ化推進室）\n                "),a("br"),t._v(" E-mail：digital-archive [at] lib.u-tokyo.ac.jp.\n            ")])],1)],1)],1)},r=[],o=a("2877"),i=a("6544"),c=a.n(i),u=a("7496"),p=a("8336"),d=a("b0af"),h=a("99d9"),f=a("549c"),m=a("553a"),v=a("9910"),y=a("71d9"),b=a("2a7f"),g={},_=Object(o["a"])(g,s,r,!1,null,null,null),x=_.exports;c()(_,{VApp:u["a"],VBtn:p["a"],VCard:d["a"],VCardActions:h["a"],VContent:f["a"],VFooter:m["a"],VSpacer:v["a"],VToolbar:y["a"],VToolbarItems:b["a"],VToolbarTitle:b["b"]});var j=a("8c4f"),q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-content",[a("v-container",{staticClass:"my-2"},[a("v-form",{ref:"form",staticClass:"mb-2"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-text-field",{staticClass:"mx-2",attrs:{label:"キーワード / Keyword",name:"q"},model:{value:t.q,callback:function(e){t.q=e},expression:"q"}})],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-select",{staticClass:"mx-2",attrs:{items:t.types,label:"資料種別 / Type",multiple:""},model:{value:t.type_array,callback:function(e){t.type_array=e},expression:"type_array"}})],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-select",{staticClass:"mx-2",attrs:{items:t.collections,label:"コレクション / Collection",multiple:""},model:{value:t.collection_array,callback:function(e){t.collection_array=e},expression:"collection_array"}})],1)],1),a("v-btn",{attrs:{color:"primary"},on:{click:t.updatePath}},[a("i",{staticClass:"material-icons"},[t._v("search")])])],1),a("v-data-table",{staticClass:"elevation-1 mt-5",attrs:{items:t.items,"hide-actions":"","hide-headers":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("th",[t._v(t._s(e.item.year))]),t._l(12,function(n){return a("td",{staticClass:"text-xs-right"},[e.item.month[n-1]>0?a("router-link",{attrs:{to:{path:"list",query:{q:t.q,type:t.type,collection:t.collection,date:e.item.year+"-"+n}}}},[t._v(t._s(n)+"月 ("+t._s(e.item.month[n-1])+")")]):a("span",[t._v(t._s(n)+"月")])],1)})]}}])})],1)],1)],1)},C=[],w=a("dc09"),V=a("3cdd"),P=a.n(V),k=a("3e32"),O=a.n(k),E=a("a20c"),F=a.n(E),I=a("bc3a"),D=a.n(I);function N(t,e){var a=t.split(e);if(3!==a.length)return!1;const n=new Date(a[0],a[1]-1,a[2]);return a[0]===String(n.getFullYear())&&a[1]===("0"+(n.getMonth()+1)).slice(-2)&&a[2]===("0"+n.getDate()).slice(-2)}var R={components:{FullCalendar:w["a"]},data:function(){return{items:[],q:"",type:"Newspaper",type_array:["Newspaper"],types:[{value:"Newspaper",text:"新聞"},{value:"StillImage",text:"静止画資料"}],collection:"",collection_array:[],collections:[]}},watch:{$route(t,e){this.search()}},created:function(){let t=Object.assign({},this.$route.query);t.q&&(this.q=t.q),t.type&&(this.type=t.type,this.type_array=this.type.split(",")),t.collection&&(this.collection=t.collection,this.collection_array=this.collection.split(",")),this.search(),this.list_collections()},methods:{handleDateClick(t){window.open(t.event.id,"_blank")},updatePath(){this.type=this.type_array.join(","),this.collection=this.collection_array.join(","),this.$router.push({path:"",query:{q:this.q,type:this.type,collection:this.collection}})},list_collections(){let t=" PREFIX dcterms: <http://purl.org/dc/terms/> \n";t+=" PREFIX dcndl: <http://ndl.go.jp/dcndl/terms/> \n",t+=" select distinct ?collection \n",t+=" WHERE { \n",t+=" ?s dcterms:isPartOf ?collection . \n",t+=' filter(lang(?collection) = "ja") . \n',t+=" } order by desc(?collection) \n",console.log(t),D.a.get("https://sparql.dl.itc.u-tokyo.ac.jp?query="+encodeURIComponent(t)+"&output=json").then(t=>{let e=t.data.results.bindings;for(let a=0;a<e.length;a++){let t=e[a],n=t.collection.value;this.collections.push(n)}}).catch(t=>{console.log(t)})},search(){let t=" PREFIX dcterms: <http://purl.org/dc/terms/> \n";if(t+=" PREFIX dcndl: <http://ndl.go.jp/dcndl/terms/> \n",t+=" select distinct ?date count(distinct ?s) as ?c \n",t+=" WHERE { \n",t+=" ?s dcterms:date ?date . \n",this.type){let e=this.type.split(",");for(let a=0;a<e.length;a++)t+=" { ?s dcndl:materialType <http://ndl.go.jp/ndltype/"+e[a]+"> . } \n",a!=e.length-1&&(t+=" UNION \n")}if(this.collection){let e=this.collection.split(",");for(let a=0;a<e.length;a++)t+=" { ?s dcterms:isPartOf '"+e[a]+"'@ja . } \n",a!=e.length-1&&(t+=" UNION \n")}this.q&&(t+=" ?s ?p ?o . \n",t+=" ?o bif:contains '\""+this.q+"\"' . \n"),t+=" } order by desc(?date) \n",console.log(t),D.a.get("https://sparql.dl.itc.u-tokyo.ac.jp?query="+encodeURIComponent(t)+"&output=json").then(t=>{let e=t.data.results.bindings,a=[];this.items=a;var n=2e3,l=0,s={};for(let r=0;r<e.length;r++){let t=e[r],a=t.date.value,o=Number(t.c.value);if(N(a,"-")){let t=a.split("-"),e=Number(t[0]);e<n&&(n=e),e>l&&(l=e);let r=Number(t[1]);s[e]||(s[e]={});let i=s[e];i[r]||(i[r]=0),i[r]+=o}}for(let r=n;r<=l;r++){let t={year:r,month:[]},e=s[r];for(let a=1;a<=12;a++){let n=null!=e&&e[a]?e[a]:0;t.month.push(n)}a.push(t)}}).catch(t=>{console.log(t)})}}},T=R,S=(a("ca9c"),a("a523")),$=a("8fea"),A=a("0e8f"),U=a("4bd4"),M=a("a722"),X=a("b56d"),W=a("2677"),H=Object(o["a"])(T,q,C,!1,null,null,null),B=H.exports;c()(H,{VApp:u["a"],VBtn:p["a"],VContainer:S["a"],VContent:f["a"],VDataTable:$["a"],VFlex:A["a"],VForm:U["a"],VLayout:M["a"],VSelect:X["a"],VTextField:W["a"]});var J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-content",[a("v-container",{staticClass:"my-2"},[a("h1",{staticClass:"mb-4"},[t._v("ポスター検索")]),a("v-layout",{attrs:{row:"",wrap:""}},t._l(t.items,function(e){return a("v-flex",{staticClass:"px-4 my-4",attrs:{xs12:"",sm2:""}},[a("a",{attrs:{href:e.seeAlso.value,target:"_blank"}},[a("v-img",{attrs:{src:e.thumbnail.value}})],1),a("div",{staticClass:"subheading pt-3"},[a("a",{attrs:{href:e.seeAlso.value,target:"_blank"}},[t._v(t._s(e.title.value))]),a("br"),t._v(t._s(e.publisher.value))])])}),1)],1)],1)],1)},L=[];function Y(t){let e=t.getFullYear(),a=t.getMonth()+1;return a=a<10?"0"+a:a,e+"-"+a}var z={components:{FullCalendar:w["a"]},data:function(){return{calendarPlugins:[P.a,O.a,F.a],calendarWeekends:!0,calendarEvents:[],defaultDate:new Date("1918-01"),q:"",type:"",collection:"",date:"1918-01",collection:"",items:[]}},watch:{$route(t,e){this.search()}},created:function(){let t=Object.assign({},this.$route.query);t.q&&(this.q=t.q),t.type&&(this.type=t.type),t.collection&&(this.collection=t.collection),t.date&&(this.defaultDate=new Date(t.date),this.date=Y(this.defaultDate)),this.search()},methods:{updatePath(){this.defaultDate=new Date(this.date),this.$router.push({path:"list",query:{q:this.q,type:this.type,date:this.date,collection:this.collection}})},search(){this.calendarEvents=[];let t=" PREFIX dcterms: <http://purl.org/dc/terms/> \n";t+=" PREFIX dcndl: <http://ndl.go.jp/dcndl/terms/> \n",t+=" select distinct * \n",t+=" WHERE { \n",t+=" ?s dcterms:title ?title . \n",t+=" ?s foaf:thumbnail ?thumbnail . \n",t+=' { ?s dcterms:isPartOf "第一次世界大戦期プロパガンダ・ポスター 益田コレクション"@ja . }  \n',t+=" UNION \n",t+=' { ?s dcterms:isPartOf "第一次世界大戦期プロパガンダポスターコレクション"@ja . }  \n',t+=" ?s dcndl:digitizedPublisher ?publisher . \n",t+=' filter (lang(?publisher) = "ja") . \n',t+=" ?s rdfs:seeAlso ?seeAlso . \n",t+=" } order by ?title \n",D.a.get("https://sparql.dl.itc.u-tokyo.ac.jp?query="+encodeURIComponent(t)+"&output=json").then(t=>{this.items=t.data.results.bindings,console.log(this.items)}).catch(t=>{console.log(t)})}}},K=z,G=(a("6c31"),a("adda")),Q=Object(o["a"])(K,J,L,!1,null,null,null),Z=Q.exports;c()(Q,{VApp:u["a"],VContainer:S["a"],VContent:f["a"],VFlex:A["a"],VImg:G["a"],VLayout:M["a"]}),n["a"].use(j["a"]);var tt=new j["a"]({routes:[{path:"/",name:"index",component:B},{path:"/poster",name:"poster",component:Z}]});n["a"].config.productionTip=!1,new n["a"]({router:tt,render:function(t){return t(x)}}).$mount("#app")},"650b":function(t,e,a){},"6c31":function(t,e,a){"use strict";var n=a("21d8"),l=a.n(n);l.a},ca9c:function(t,e,a){"use strict";var n=a("650b"),l=a.n(n);l.a}});
//# sourceMappingURL=app.808caba3.js.map